<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <title>webrtc-pc interop</title>
  </head>
<style>
table.results {
  border: 2px solid darkgrey;
  background-color: white;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.results td, table.results th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.results tbody td {
  font-size: 13px;
}
table.results thead {
  background: grey;
}
table.results thead th {
  font-size: 19px;
  font-weight: bold;
  color: #FFFFFF;
  background: darkgrey;
  text-align: center;
  border-left: 2px solid grey;
}
table.results tbody th {
  text-align: right;
}
table.results thead th:first-child {
  border-left: none;
}

table.results tbody tr.good {
  background: #cfc;
}
table.results tbody tr.ok {
  background: #efa;
}
table.results tbody tr.bad {
  background: #fcc;
}
table.results tbody tr.ignore {
  opacity: 0.5;
}

table.results tbody td.comment {
 text-align: left;
}

table.results tbody td.todo {
 border: 2px solid #f00;
}

</style>
  <body>
    <main id="content">
      <section>
      <h2>Implementation gaps</h2>
      <dl>
        <dt><code>RTCIceCandidate</code> interface attributes</dt>
        <dd>foundation, component, priority, address, protocol, port, type, tcpType, relatedAddress, relatedPort</dd>
        <dt><code>RTCDtlsTransport</code> interface</dt>
        <dd>Not implemented in FF, Safari; implemented partially in old Edge (but does it pass the tests?)</dd>
        <dt><code>RTCIceTransport</code> interface</dt>
        <dd>Missing in FF; Available in SecureContext only in Chromium? missing component attribute in Chromium; missing most attributes/methods in Safari</dd>
        <dd>In general, some tests are https-only, but not clear if this is always justified</dd>
        <dt>RTCDataChannel.onclosing</dt>
        <dd>No implementation</dd>
        <dt>canTrickleIceCandidates</dt>
        <dd>Not available in Chromium, Safari</dd>
        <dt>onicecandidateerror</dt>
        <dd>Not available in Firefox, Safari</dd>
        <dt>readonly attributes in RTCSessionDescription (type, sdp)</dt>
        <dd>writable in FF, Chromium</dd>
        <dt><code>RTCPeerConnection.setLocalDescription()</code></dt>
        <dd>Supports for zero-argument in FF, Safari?</dd>
        <dt><code>RTCPeerConnection.setRemoteDescription()</code></dt>
        <dd>Supports for zero-argument in all browsers</dd>
        <dt><code>RTCPeerConnection.addIceCandidate()</code></dt>
        <dd>Supports for zero-argument in Chromium, Safari</dd>
        <dt>validation of <code>rid</code> values in addTransceiver</dt>
        <dt><code>createOffer</code></dt>
        <dd>Chromium Safari fails "When media stream is added when createOffer() is running in parallel, the result offer should contain the new media stream"</dd>
        <dt><code>blob</code> argument for <code>RTCDataChannel.send()</code></dt>
        <dd>Missing in Chromium</dd>
        <dt>sctp transport</dt>
        <dd>Missing in FF, Safari</dd>
        <dt><code>transceiver.stop()</code></dt>
        <dd>Missing from chromium</dd>
        <dt><code>restartIce</code> survives remote offer containing partial restart</dt>
        <dd>Not implemented in FF, Chromium</dd>
        <dt><code>RTCRtpSender.setStreams()</code></dt>
        <dd>Not implemented in FF, Safari</dd>
        <dt><code>setCodecPreferences</code></dt>
        <dd>Not implemented in FF, Safari? (per <a href="https://wpt.fyi/results/webrtc/RTCRtpParameters-codecs.html?label=experimental&label=master&aligned">RTCRtpParamters-codecs.html</a>, <a href="https://wpt.fyi/results/webrtc/RTCRtpTransceiver-setCodecPreferences.html">RTCRtpTransceiver-setCodecPreferences.html</a></dd>
        <dt>RTCError, RTCErrorEvent</dt>
        <dd>Not implemented in Firefox, Safari (OperationError fallback test?); bug in RTCErrorEvent consutrctor (cf <a href="https://wpt.fyi/results/webrtc/idlharness.https.window.html">idlharness test</a></dd>
        <dt>setLocalDescription() with offer not created by own createOffer() should reject with InvalidModificationError</dt>
        <dd>Fails in Chromium, Safari</dd>
        <dt>RTCPeerConnectionIceEvent url attribute</dt>
        <dd>Missing in FF, Chromium</dd>
        <dt>RTCPeerConnectionIceErrorEvent</dt>
        <dd>Missing in FF, Safari; address, port missing in Chromium</dd>
        <dt>parameter-less setParameters (!)</dt>
        <dd>Bug in FF, Chromium</dd>
        <dt>Stats</dt>
        <dd>

          Chromium lifecyle for presence of  RTCInboundRtpStreamStats, RTCRemoteInboundRtpStreamStats,  RTCOutboundRtpStreamStats, RTCRemoteOutboundRtpStreamStats, RTCDataChannelStats? <br>FF lifecycle for presence of RTCIceCandidatePairStats.state, currentRoundTripTime. RTCCodecStats, RTCInboundRtpStreamStats, RTCRemoteInboundRtpStreamStats, RTCOutboundRtpStreamStats, RTCRemoteOutboundRtpStreamStats, RTCDataChannelStats, RTCMediaHandlerStats, RTCTransportStats, RTCCertificateStats?</dd>
      </dl>
      </section>
      <section>
        <h2>Test suite issues</h2>
        <h3>Bugs</h3>
        <ul>
          <li>test for <code>bufferedAmount</code> depends on <code>blob</code> sending (but not implemented in Chromium yet)</li>
          <li>is <a href="https://github.com/web-platform-tests/wpt/blob/master/webrtc/RTCCertificate-postMessage.html#L61">x-origin RTCCertificate</a> expected to fail?</li>
          <li>pendingRemoteDescription not null after <code>pranswer</code> in <a href="https://github.com/web-platform-tests/wpt/blob/master/webrtc/RTCPeerConnection-setLocalDescription-pranswer.html#L106">RTCPeerConnection-setLocalDescription-pranswer.html</a> per 3.2.4.3 of set session description?</li>
          <li>Unclear if outbound-rtp stats needs to be collected when nothing is sent in <a href="https://wpt.fyi/results/webrtc/RTCPeerConnection-getStats.https.html">RTCPeerConnection-getStats.https.html</a></li>
          <li><code>stream</code> stats are obsolete, not MTI</li>
        </ul>
        <h3>Gaps</h3>
        <ul>
          <li>dedicated test for RTCPeerConnection.setConfiguration()</li>
          <li>Need test for transceiver.currentDirection == stopped</li>
        </ul>
      </section>

      <section>
        <h2>Annotated WPT results</h2>
      <table class="results">
          <thead>
            <tr>
              <th>Tests</th>
                <th>Chrome</th>
                <th>Edge</th>
                <th>FireFox</th>
              <th>Safari</th>
              <th>old Edge</th>
		<th>Notes</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
      </table>
      </section>
      <section>
        <h2>MIT Stats</h2>
        <p>Static results as of December 18 2019 (based on <a href="https://wpt.fyi/results/webrtc/RTCPeerConnection-mandatory-getStats.https.html?">mandatory stats test</a> amended for passing Safari lack of <code>kind</code>)</p>
                  <table class=results>
            <thead>
              <tr><th>MTI Stat</th><th>Chromium</th><th>FF</th><th>Safari</th></tr>
            </thead>
            <tbody>
              <tr class=good><th scope='row'>RTCRtpStreamStats's ssrc</th><td></td><td></td><td></td></tr>
              <tr class=good><th scope='row'>RTCRtpStreamStats's kind</th><td></td><td></td><td>❌</td></tr>
              <tr><th scope='row'>RTCRtpStreamStats's transportId</th><td></td><td>❌</td><td>❌</td></tr>
<tr><th scope='row'>RTCRtpStreamStats's codecId</th><td>❌</td><td>❌</td><td></td></tr>
<tr class=good><th scope='row'>RTCReceivedRtpStreamStats's packetsReceived</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCReceivedRtpStreamStats's packetsLost</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCReceivedRtpStreamStats's jitter</th><td>❌</td><td></td><td></td></tr>
<tr class=bad><th scope='row'>RTCReceivedRtpStreamStats's packetsDiscarded</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCInboundRtpStreamStats's receiverId</th><td></td><td></td><td></td></tr>
<tr class=bad><th scope='row'>RTCInboundRtpStreamStats's remoteId</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr><th scope='row'>RTCInboundRtpStreamStats's framesDecoded</th><td>❌</td><td>❌</td><td></td></tr>
<tr class=good><th scope='row'>RTCInboundRtpStreamStats's nackCount</th><td></td><td></td><td></td></tr>
<tr><th scope='row'>RTCInboundRtpStreamStats's framesReceived</th><td>❌</td><td></td><td>❌</td></tr>
<tr class=bad><th scope='row'>RTCInboundRtpStreamStats's framesDropped</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCInboundRtpStreamStats's partialFramesLost</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCInboundRtpStreamStats's totalAudioEnergy</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCInboundRtpStreamStats's totalSamplesDuration</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCRemoteInboundRtpStreamStats's localId</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCRemoteInboundRtpStreamStats's bytesReceived</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCRemoteInboundRtpStreamStats's roundTripTime</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCSentRtpStreamStats's packetsSent</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCSentRtpStreamStats's bytesSent</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCOutboundRtpStreamStats's senderId</th><td></td><td></td><td>❌</td></tr>
<tr class=bad><th scope='row'>RTCOutboundRtpStreamStats's remoteId</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCOutboundRtpStreamStats's framesEncoded</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCOutboundRtpStreamStats's nackCount</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCOutboundRtpStreamStats's framesSent</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCRemoteOutboundRtpStreamStats's localId</th><td></td><td></td><td>❌</td></tr>
<tr><th scope='row'>RTCRemoteOutboundRtpStreamStats's remoteTimestamp</th><td></td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCPeerConnectionStats's dataChannelsOpened</th><td></td><td>❌</td><td></td></tr>
<tr class=good><th scope='row'>RTCPeerConnectionStats's dataChannelsClosed</th><td></td><td>❌</td><td></td></tr>
<tr class=good><th scope='row'>RTCDataChannelStats's protocol</th><td></td><td>❌</td><td></td></tr>
<tr class=bad><th scope='row'>RTCDataChannelStats's dataChannelIdentifier</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCDataChannelStats's state</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCDataChannelStats's messagesSent</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCDataChannelStats's bytesSent</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCDataChannelStats's messagesReceived</th><td></td><td></td><td></td></tr>
<tr class=good><th scope='row'>RTCDataChannelStats's bytesReceived</th><td></td><td></td><td>❌</td></tr>
<tr class=bad><th scope='row'>RTCMediaSourceStats's trackIdentifier</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr><th scope='row'>RTCMediaSourceStats's kind</th><td></td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCAudioSourceStats's totalAudioEnergy</th><td></td><td>❌</td><td></td></tr>
<tr><th scope='row'>RTCAudioSourceStats's totalSamplesDuration</th><td></td><td>❌</td><td>❌</td></tr>
<tr><th scope='row'>RTCVideoSourceStats's width</th><td></td><td>❌</td><td>❌</td></tr>
<tr><th scope='row'>RTCVideoSourceStats's height</th><td></td><td>❌</td><td>❌</td></tr>
<tr><th scope='row'>RTCVideoSourceStats's framesPerSecond</th><td></td><td>❌</td><td>❌</td></tr>
<tr class=bad><th scope='row'>RTCMediaHandlerStats's trackIdentifier</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCCodecStats's payloadType</th><td></td><td>❌</td><td></td></tr>
<tr class=bad><th scope='row'>RTCCodecStats's codecType</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCCodecStats's mimeType</th><td></td><td>❌</td><td></td></tr>
<tr class=good><th scope='row'>RTCCodecStats's clockRate</th><td></td><td>❌</td><td></td></tr>
<tr class=bad><th scope='row'>RTCCodecStats's channels</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=bad><th scope='row'>RTCCodecStats's sdpFmtpLine</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCTransportStats's bytesSent</th><td></td><td>❌</td><td></td></tr>
<tr><th scope='row'>RTCTransportStats's bytesReceived</th><td></td><td>❌</td><td>❌</td></tr>
<tr><th scope='row'>RTCTransportStats's selectedCandidatePairId</th><td></td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCTransportStats's localCertificateId</th><td></td><td>❌</td><td></td></tr>
<tr><th scope='row'>RTCTransportStats's remoteCertificateId</th><td></td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidatePairStats's transportId</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidatePairStats's localCandidateId</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidatePairStats's remoteCandidateId</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidatePairStats's state</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidatePairStats's priority</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidatePairStats's nominated</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidatePairStats's bytesSent</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidatePairStats's bytesReceived</th><td></td><td></td><td>❌</td></tr>
<tr><th scope='row'>RTCIceCandidatePairStats's totalRoundTripTime</th><td></td><td>❌</td><td>❌</td></tr>
<tr><th scope='row'>RTCIceCandidatePairStats's currentRoundTripTime</th><td></td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidateStats's address</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidateStats's port</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidateStats's protocol</th><td></td><td></td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCIceCandidateStats's candidateType</th><td></td><td></td><td>❌</td></tr>
<tr class=bad><th scope='row'>RTCIceCandidateStats's url</th><td>❌</td><td>❌</td><td>❌</td></tr>
<tr class=good><th scope='row'>RTCCertificateStats's fingerprint</th><td></td><td>❌</td><td></td></tr>
<tr class=good><th scope='row'>RTCCertificateStats's fingerprintAlgorithm</th><td></td><td>❌</td><td></td></tr>
<tr class=good><th scope='row'>RTCCertificateStats's base64Certificate</th><td></td><td>❌</td><td></td></tr>
<tr><th scope='row'>RTCCertificateStats's issuerCertificateId</th><td></td><td>❌</td><td>❌</td></tr>
            </tbody>
          </table>
        </section>
    </main>
    <script src="load.js"></script>
  </body>
</html>
